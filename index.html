<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <!-- <link rel="stylesheet" href="./index.css"> -->
        <title>C</title>
    </head>
    <style>
        #canv{
        background-color: rgb(0, 0, 0);
        }
        body{
            margin: 0;
            width: 100%;
            height: 100%;
        }
    </style>
    <body>
        <canvas id="canv"></canvas>
        <!-- <script src="./index.js"></script> -->
        <script>

            const canvas = document.getElementById('canv');
            const ctx = canvas.getContext('2d');
            // 获取设备像素比
            const devicePixelRatio = window.devicePixelRatio;
            var w = window.innerWidth * devicePixelRatio;
            var h = window.innerHeight * devicePixelRatio;
            // 设置 Canvas 的宽度和高度，并考虑设备像素比
            function resizeCanvas() {
                canvas.width = w
                canvas.height = h
                canvas.style.width = window.innerWidth + 'px';
                canvas.style.height = window.innerHeight + 'px';
                // 在这里进行你的绘制操作，确保使用设备像素比进行缩放
                ctx.scale(devicePixelRatio, devicePixelRatio);
                // ... 其他绘制代码
            }
            // 初始化时调整 Canvas 大小
            resizeCanvas();
            // 窗口大小改变时重新调整 Canvas 大小
            window.addEventListener('resize', resizeCanvas);

            function font() {
                let f = [[0x4E00,0x9FA5],[0x0500,0x052F],[0x05D0,0x05EA],
                        [0x066E,0x06D3],[0x0800,0x083E],[0x2E80,0x2EF3],
                        [0x3041,0x3096],[0x103A0,0x103D5],[0x13000,0x1342E],
                        [0x0370,0x03FF],[0x0030,0x007A],[0x1F700,0x1F773]]
                let fran = Math.floor(Math.random()*f.length)
                const minCodePoint = f[fran][0];
                const maxCodePoint = f[fran][1]; 
                const randomCodePoint = Math.floor(Math.random() * (maxCodePoint - minCodePoint + 1)) + minCodePoint;
                return String.fromCharCode(randomCodePoint)
            }

            let fontarr = []
            function fontm() {
                let arr = []
                arr[0] = Math.floor(Math.random()*w)
                arr[1] = 0
                arr[2] = Math.random()*20+10
                return arr
            }

            function draw(i) {
                for (let i = 0; i < fontarr.length; i++) {
                    ctx.font = fontarr[i][2]+"px"+" Arial";
                    ctx.fillStyle = "rgb(30,144,255)";
                    ctx.shadowColor = "rgb(30,144,255)";
                    ctx.shadowBlur = fontarr[i][2];
                    ctx.fillText(font()+"", fontarr[i][0],fontarr[i][1]);
                    fontarr[i][1] = fontarr[i][1]+fontarr[i][2]
                    if (fontarr[i][1]>h) {
                        fontarr[i] = fontm()
                    }
                }
                ctx.shadowColor = "rgb(0,0,0)";
                ctx.fillStyle = 'rgb(0, 0, 0, 0.1)';
                ctx.fillRect(0, 0, w, h); 
            }

            for (let i = 0; i < 70; i++) {
                fontarr.push(fontm())
            }

            setInterval(draw, 90);

        </script>
    </body>

</html>